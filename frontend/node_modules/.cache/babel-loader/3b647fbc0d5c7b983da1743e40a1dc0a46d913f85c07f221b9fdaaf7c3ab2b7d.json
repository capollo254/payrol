{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Code_AI\\\\Documents\\\\PAYROL SYSTEM COMPLEX\\\\Apollo PAYROL SYSTEM - backup 3 working backend\\\\kenyan_payroll_system\\\\frontend\\\\src\\\\pages\\\\admin\\\\DashboardPage.js\",\n  _s = $RefreshSig$();\n// src/pages/admin/DashboardPage.js\n\nimport React, { useEffect, useState } from 'react';\nimport { getEmployees } from '../../api/employees';\nimport { getPayrollRuns } from '../../api/payroll';\nimport DashboardWidget from '../../components/dashboard/DashboardWidget';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DashboardPage = () => {\n  _s();\n  const [employees, setEmployees] = useState([]);\n  const [payrollRuns, setPayrollRuns] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const navigate = useNavigate();\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const employeesData = await getEmployees();\n        setEmployees(employeesData);\n        const payrollRunsData = await getPayrollRuns();\n        setPayrollRuns(payrollRunsData);\n      } catch (err) {\n        console.error('Failed to fetch dashboard data:', err);\n        if (err.response && err.response.status === 401) {\n          localStorage.removeItem('token');\n          localStorage.removeItem('role');\n          navigate('/login');\n        }\n        setError('Failed to load dashboard data.');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, [navigate]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container page\",\n      children: \"Loading dashboard...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 12\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container page error\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 12\n    }, this);\n  }\n  const lastPayrollRun = payrollRuns.length > 0 ? payrollRuns[0] : null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container page\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Admin Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'grid',\n        gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))',\n        gap: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(DashboardWidget, {\n        title: \"Total Employees\",\n        value: employees.length,\n        description: \"Number of active employees in the system.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), lastPayrollRun && /*#__PURE__*/_jsxDEV(DashboardWidget, {\n        title: \"Last Payroll Run\",\n        value: new Date(lastPayrollRun.run_date).toLocaleDateString(),\n        description: \"Date of the most recent payroll.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Recent Payroll Runs\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), payrollRuns.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          overflowX: 'auto'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Run Date\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 74,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Period\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 76,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: payrollRuns.slice(0, 5).map(run => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: new Date(run.run_date).toLocaleDateString()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: [new Date(run.period_start_date).toLocaleDateString(), \" - \", new Date(run.period_end_date).toLocaleDateString()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 83,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: run.status\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 21\n              }, this)]\n            }, run.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No recent payroll runs to display.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n};\n_s(DashboardPage, \"5XkvalnRRoptt0BKvVoPauVvmo4=\", false, function () {\n  return [useNavigate];\n});\n_c = DashboardPage;\nexport default DashboardPage;\nvar _c;\n$RefreshReg$(_c, \"DashboardPage\");","map":{"version":3,"names":["React","useEffect","useState","getEmployees","getPayrollRuns","DashboardWidget","useNavigate","jsxDEV","_jsxDEV","DashboardPage","_s","employees","setEmployees","payrollRuns","setPayrollRuns","loading","setLoading","error","setError","navigate","fetchData","employeesData","payrollRunsData","err","console","response","status","localStorage","removeItem","className","children","fileName","_jsxFileName","lineNumber","columnNumber","lastPayrollRun","length","style","display","gridTemplateColumns","gap","title","value","description","Date","run_date","toLocaleDateString","marginTop","overflowX","slice","map","run","period_start_date","period_end_date","id","_c","$RefreshReg$"],"sources":["C:/Users/Code_AI/Documents/PAYROL SYSTEM COMPLEX/Apollo PAYROL SYSTEM - backup 3 working backend/kenyan_payroll_system/frontend/src/pages/admin/DashboardPage.js"],"sourcesContent":["// src/pages/admin/DashboardPage.js\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport { getEmployees } from '../../api/employees';\r\nimport { getPayrollRuns } from '../../api/payroll';\r\nimport DashboardWidget from '../../components/dashboard/DashboardWidget';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst DashboardPage = () => {\r\n  const [employees, setEmployees] = useState([]);\r\n  const [payrollRuns, setPayrollRuns] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const employeesData = await getEmployees();\r\n        setEmployees(employeesData);\r\n        \r\n        const payrollRunsData = await getPayrollRuns();\r\n        setPayrollRuns(payrollRunsData);\r\n        \r\n      } catch (err) {\r\n        console.error('Failed to fetch dashboard data:', err);\r\n        if (err.response && err.response.status === 401) {\r\n          localStorage.removeItem('token');\r\n          localStorage.removeItem('role');\r\n          navigate('/login');\r\n        }\r\n        setError('Failed to load dashboard data.');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchData();\r\n  }, [navigate]);\r\n\r\n  if (loading) {\r\n    return <div className=\"container page\">Loading dashboard...</div>;\r\n  }\r\n\r\n  if (error) {\r\n    return <div className=\"container page error\">{error}</div>;\r\n  }\r\n\r\n  const lastPayrollRun = payrollRuns.length > 0 ? payrollRuns[0] : null;\r\n\r\n  return (\r\n    <div className=\"container page\">\r\n      <h2>Admin Dashboard</h2>\r\n      <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))', gap: '20px' }}>\r\n        <DashboardWidget \r\n          title=\"Total Employees\" \r\n          value={employees.length} \r\n          description=\"Number of active employees in the system.\" \r\n        />\r\n        {lastPayrollRun && (\r\n          <DashboardWidget \r\n            title=\"Last Payroll Run\" \r\n            value={new Date(lastPayrollRun.run_date).toLocaleDateString()}\r\n            description=\"Date of the most recent payroll.\" \r\n          />\r\n        )}\r\n      </div>\r\n      <div style={{ marginTop: '20px' }}>\r\n        <h3>Recent Payroll Runs</h3>\r\n        {payrollRuns.length > 0 ? (\r\n          <div style={{ overflowX: 'auto' }}>\r\n            <table>\r\n              <thead>\r\n                <tr>\r\n                  <th>Run Date</th>\r\n                  <th>Period</th>\r\n                  <th>Status</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {payrollRuns.slice(0, 5).map(run => (\r\n                  <tr key={run.id}>\r\n                    <td>{new Date(run.run_date).toLocaleDateString()}</td>\r\n                    <td>{new Date(run.period_start_date).toLocaleDateString()} - {new Date(run.period_end_date).toLocaleDateString()}</td>\r\n                    <td>{run.status}</td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        ) : (\r\n          <p>No recent payroll runs to display.</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DashboardPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}