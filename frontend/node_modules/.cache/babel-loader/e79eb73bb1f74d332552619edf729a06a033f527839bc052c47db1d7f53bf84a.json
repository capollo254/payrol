{"ast":null,"code":"// src/pages/admin/DashboardPage.js\nimport React,{useEffect,useState}from'react';import api from'../../api/auth';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminDashboardPage=()=>{const[employees,setEmployees]=useState([]);const[loading,setLoading]=useState(true);const navigate=useNavigate();useEffect(()=>{const fetchEmployees=async()=>{const token=localStorage.getItem('token');if(!token){navigate('/login');return;}try{const response=await api.get('employees/',{headers:{Authorization:\"Token \".concat(token)}});setEmployees(response.data);}catch(error){console.error('Failed to fetch employees:',error);if(error.response&&error.response.status===401){localStorage.removeItem('token');localStorage.removeItem('role');navigate('/login');}}finally{setLoading(false);}};fetchEmployees();},[navigate]);if(loading){return/*#__PURE__*/_jsx(\"div\",{style:{padding:'20px'},children:\"Loading employees...\"});}return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{marginBottom:'20px'},children:\"Admin Dashboard\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"All Employees\"}),employees.length>0?/*#__PURE__*/_jsx(\"ul\",{style:{listStyleType:'none',padding:0},children:employees.map(employee=>/*#__PURE__*/_jsxs(\"li\",{style:{border:'1px solid #ccc',padding:'10px',marginBottom:'10px',borderRadius:'4px'},children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name:\"}),\" \",employee.full_name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" \",employee.user.email]})]},employee.id))}):/*#__PURE__*/_jsx(\"p\",{children:\"No employees found.\"})]});};export default AdminDashboardPage;","map":{"version":3,"names":["React","useEffect","useState","api","useNavigate","jsx","_jsx","jsxs","_jsxs","AdminDashboardPage","employees","setEmployees","loading","setLoading","navigate","fetchEmployees","token","localStorage","getItem","response","get","headers","Authorization","concat","data","error","console","status","removeItem","style","padding","children","marginBottom","length","listStyleType","map","employee","border","borderRadius","full_name","user","email","id"],"sources":["C:/Users/Code_AI/Documents/PAYROL SYSTEM COMPLEX/Apollo PAYROL SYSTEM - backup 3 working backend/kenyan_payroll_system/frontend/src/pages/admin/DashboardPage.js"],"sourcesContent":["// src/pages/admin/DashboardPage.js\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport api from '../../api/auth';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst AdminDashboardPage = () => {\r\n  const [employees, setEmployees] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const fetchEmployees = async () => {\r\n      const token = localStorage.getItem('token');\r\n      if (!token) {\r\n        navigate('/login');\r\n        return;\r\n      }\r\n      try {\r\n        const response = await api.get('employees/', {\r\n          headers: {\r\n            Authorization: `Token ${token}`,\r\n          },\r\n        });\r\n        setEmployees(response.data);\r\n      } catch (error) {\r\n        console.error('Failed to fetch employees:', error);\r\n        if (error.response && error.response.status === 401) {\r\n          localStorage.removeItem('token');\r\n          localStorage.removeItem('role');\r\n          navigate('/login');\r\n        }\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchEmployees();\r\n  }, [navigate]);\r\n\r\n  if (loading) {\r\n    return <div style={{ padding: '20px' }}>Loading employees...</div>;\r\n  }\r\n\r\n  return (\r\n    <div style={{ padding: '20px' }}>\r\n      <h2 style={{ marginBottom: '20px' }}>Admin Dashboard</h2>\r\n      <h3>All Employees</h3>\r\n      {employees.length > 0 ? (\r\n        <ul style={{ listStyleType: 'none', padding: 0 }}>\r\n          {employees.map(employee => (\r\n            <li key={employee.id} style={{ border: '1px solid #ccc', padding: '10px', marginBottom: '10px', borderRadius: '4px' }}>\r\n              <p><strong>Name:</strong> {employee.full_name}</p>\r\n              <p><strong>Email:</strong> {employee.user.email}</p>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      ) : (\r\n        <p>No employees found.</p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminDashboardPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}